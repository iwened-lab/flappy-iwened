<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flappy IWENED - Le jeu créé avec Gemini</title>
    <meta name="google-site-verification" content="gWzFuglv36-kMpw0SbNe5a-_KhyAsqQfj-im-qHPQ10" />
    
    <meta name="description" content="Flappy IWENED est un jeu mobile inspiré de Flappy Bird créé par IWENED avec l'aide de Google Gemini. Jouez gratuitement !">
    <meta name="keywords" content="Flappy, IWENED, jeu vidéo, flappy bird, google gemini, jeu mobile, youtube">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #70c5ce; 
            overflow: hidden; 
            touch-action: none; 
            font-family: 'Courier New', Courier, monospace;
            user-select: none; 
            -webkit-user-select: none; 
        }
        canvas {
            display: block;
        }
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .score {
            font-size: 40px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 0 #000;
            position: absolute;
            top: 10%;
        }
        /* --- STYLE DU BOUTON YOUTUBE --- */
        #youtubeLink {
            position: absolute;
            top: 15px; 
            left: 15px; 
            pointer-events: auto; 
            z-index: 1000; 
        }
        #youtubeLink a {
            display: block;
            background-color: #FF0000; 
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: background-color 0.2s;
        }
        #youtubeLink a:hover {
            background-color: #CC0000;
        }
        /* --- FIN STYLE YOUTUBE --- */

        .message {
            background: rgba(255, 255, 255, 0.95); 
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #333;
            box-shadow: 0px 5px 20px rgba(0,0,0,0.4); 
            display: none; 
            max-width: 80%;
            pointer-events: auto; 
            position: relative; 
        }
        h1 { margin: 0 0 15px 0; font-size: 32px; color: #333; text-shadow: 1px 1px 0 rgba(0,0,0,0.1); }
        p { font-size: 16px; color: #333; margin: 10px 0; line-height: 1.4; }
        
        .credits {
            font-size: 14px;
            color: #d32f2f; 
            font-weight: bold;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .small-text {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            max-width: 250px;
        }
        
        #startButton, #restartButton {
            background-color: #4CAF50; 
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            outline: none;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
            transition: background-color 0.2s, transform 0.1s;
            margin-top: 25px; 
        }
        #startButton:hover, #restartButton:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }
        #startButton:active, #restartButton:active {
            background-color: #3e8e41;
            transform: translateY(1px);
            box-shadow: 0px 2px 5px rgba(0,0,0,0.2);
        }
        #restartButton {
             background-color: #f44336; 
        }
    </style>
</head>
<body>

    <div id="ui-layer">
        
        <div id="youtubeLink">
            <a href="https://www.youtube.com/@IWENED" target="_blank">
                ▶️ Ma Chaîne YTB
            </a>
        </div>
        
        <div class="score" id="scoreDisplay">0</div>
        
        <div class="message" id="startScreen" style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <h1>Flappy IWENED</h1>
            
            <p class="small-text">Ce jeu a été créé par <strong style="color:#d32f2f;">IWENED</strong> avec l'aide précieuse de <strong style="color:#3f51b5;">Google Gemini</strong>.</p>
            
            <button id="startButton">DÉMARRER</button>
        </div>

        <div class="message" id="gameOverScreen">
            <h1>Perdu !</h1>
            <p>Score: <span id="finalScore">0</span></p>
            <button id="restartButton">Rejouer</button> 
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    // --- CONFIGURATION ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // UI Elements
    const scoreDisplay = document.getElementById('scoreDisplay');
    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const finalScoreDisplay = document.getElementById('finalScore');
    const startButton = document.getElementById('startButton');
    const restartButton = document.getElementById('restartButton'); 

    // Variables du jeu
    let frames = 0;
    let score = 0;
    let state = { current: 0, getReady: 0, game: 1, over: 2 };
    
    // Adaptation à la taille de l'écran mobile
    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize(); 

    // --- OBJETS DU JEU ---

    // L'Oiseau 
    const bird = {
        x: 50,
        y: 150,
        radius: 12,
        velocity: 0,
        gravity: 0.25,
        jump: 4.6,
        
        draw: function() {
            ctx.fillStyle = "#ffeb3b"; 
            ctx.strokeStyle = "#000";
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            ctx.fillStyle = "#fff";
            ctx.beginPath();
            ctx.arc(this.x + 5, this.y - 5, 4, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = "#000";
            ctx.beginPath();
            ctx.arc(this.x + 7, this.y - 5, 1, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = "#fff";
            ctx.beginPath();
            ctx.ellipse(this.x - 5, this.y + 2, 6, 4, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
        },
        
        update: function() {
            this.velocity += this.gravity;
            this.y += this.velocity;

            if (this.y + this.radius >= canvas.height) {
                this.y = canvas.height - this.radius;
                state.current = state.over;
                showGameOver();
            }
        },
        
        flap: function() {
            this.velocity = -this.jump;
        },
        
        reset: function() {
            this.velocity = 0;
            this.y = canvas.height / 2;
            this.x = canvas.width / 4; 
        }
    };

    // Les "Tuyaux" transformés en Lamborghinis
    const pipes = {
        position: [],
        w: 60, 
        gap: 160, 
        dx: 3, 
        
        draw: function() {
            for (let i = 0; i < this.position.length; i++) {
                let p = this.position[i];
                let topY = p.y;
                let bottomY = p.y + this.gap;

                ctx.fillStyle = "#FF0000"; 
                ctx.strokeStyle = "#444"; 
                ctx.lineWidth = 2;

                ctx.fillRect(p.x, 0, this.w, topY);
                ctx.strokeRect(p.x, 0, this.w, topY);
                ctx.fillStyle = "#555"; 
                ctx.fillRect(p.x, topY - 10, this.w, 10);
                ctx.strokeRect(p.x, topY - 10, this.w, 10);


                ctx.fillStyle = "#FF0000"; 
                ctx.fillRect(p.x, bottomY, this.w, canvas.height - bottomY);
                ctx.strokeRect(p.x, bottomY, this.w, canvas.height - bottomY);
                ctx.fillStyle = "#555"; 
                ctx.fillRect(p.x, bottomY, this.w, 10);
                ctx.strokeRect(p.x, bottomY, this.w, 10);
            }
        },
        
        update: function() {
            if (frames % 120 == 0) {
                let maxY = canvas.height - this.gap - 50;
                let minY = 50;
                let y = Math.floor(Math.random() * (maxY - minY + 1) + minY);
                this.position.push({ x: canvas.width, y: y, passed: false });
            }

            for (let i = 0; i < this.position.length; i++) {
                let p = this.position[i];
                p.x -= this.dx;

                // --- DÉTECTION DE COLLISION ---
                let birdLeft = bird.x - bird.radius;
                let birdRight = bird.x + bird.radius;
                let birdTop = bird.y - bird.radius;
                let birdBottom = bird.y + bird.radius;

                let pipeLeft = p.x;
                let pipeRight = p.x + this.w; 
                let pipeTop = p.y;
                let pipeBottom = p.y + this.gap;

                if (birdRight > pipeLeft && birdLeft < pipeRight) {
                    if (birdTop < pipeTop || birdBottom > pipeBottom) {
                        state.current = state.over;
                        showGameOver();
                    }
                }
                
                // --- DÉTECTION DU SCORE ---
                if (p.x + this.w < bird.x && !p.passed) {
                    score++;
                    scoreDisplay.innerText = score;
                    p.passed = true;
                }
                
                // Suppression du tuyau une fois sorti de l'écran
                if (p.x + this.w <= 0) {
                    this.position.shift();
                    i--; 
                }
            }
        },
        
        reset: function() {
            this.position = [];
        }
    };

    // --- CONTROLE ET BOUCLE ---

    function loop() {
        if (state.current == state.game) {
            bird.update();
            pipes.update();
            frames++;
        } else if (state.current == state.getReady) {
             bird.y = (canvas.height / 2) + Math.cos(frames/20) * 5;
             frames++;
        }

        ctx.fillStyle = "#70c5ce";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
        ctx.beginPath(); ctx.arc(100, 100, 30, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(140, 110, 40, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(canvas.width - 50, 60, 30, 0, Math.PI*2); ctx.fill();

        ctx.fillStyle = "#ded895";
        ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
        ctx.strokeStyle = "#bdae56";
        ctx.beginPath(); ctx.moveTo(0, canvas.height-20); ctx.lineTo(canvas.width, canvas.height-20); ctx.stroke();

        pipes.draw();
        bird.draw();

        requestAnimationFrame(loop);
    }

    // Gestion des entrées
    window.addEventListener("touchstart", function(e) {
        if (state.current === state.game) {
            e.preventDefault();
            bird.flap();
        }
    }, {passive: false});

    window.addEventListener("mousedown", function(e) {
        if (state.current === state.game) {
            bird.flap();
        }
    });

    window.addEventListener("keydown", function(e) {
        if(e.code === "Space" && state.current === state.game) {
            bird.flap();
        }
    });

    // Écouteur pour le bouton Démarrer
    startButton.addEventListener("click", function() {
        if (state.current === state.getReady) {
            state.current = state.game;
            startScreen.style.display = "none";
            scoreDisplay.style.display = "block"; 
            bird.flap(); 
        }
    });

    // Écouteur pour le bouton Rejouer (écran Game Over)
    restartButton.addEventListener("click", function() {
        resetGame();
    });


    function showGameOver() {
        finalScoreDisplay.innerText = score;
        gameOverScreen.style.display = "block";
        scoreDisplay.style.display = "none";
    }

    function resetGame() {
        bird.reset();
        pipes.reset();
        score = 0;
        frames = 0;
        scoreDisplay.innerText = score;
        scoreDisplay.style.display = "none"; 
        gameOverScreen.style.display = "none";
        state.current = state.getReady;
        startScreen.style.display = "flex"; 
    }

    bird.reset(); 
    scoreDisplay.style.display = "none"; 
    loop(); 

</script>
</body>
</html>

